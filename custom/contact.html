<!DOCTYPE html>
<html lang="zh">

<head>
    <title>Woolito Animation Studio</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <link rel="shortcut icon" href="http://68.media.tumblr.com/avatar_b52e662f5c5a_128.png">
    <meta property="og:site_name" content="Woolito Animation Studio">
    <meta property="og:title" content="Woolito Animation Studio">
    <meta property="og:url" content="http://woolito.tumblr.com/">
    <meta property="og:type" content="blog">
    <meta property="og:description" content="我們努力創作並分享笑容，希望能為彼此的生活點綴一些無厘頭的樂趣！">
    <meta property="og:image" content="http://68.media.tumblr.com/avatar_b52e662f5c5a_128.png">
    <!-- detect mobile agent or size -->
    <script src="http://static.tumblr.com/sirdwhf/uUkofswvo/detect-mobile.js"></script>
    <link rel="stylesheet" href="http://static.tumblr.com/e6lc7yi/z3pnekdqv/precrafted-social.css">
    <link rel="stylesheet" href="http://static.tumblr.com/e6lc7yi/g6Fnsuud3/fixie-styles.css">
    <!--bootstrap css-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <!-- jquery 1.10.2 and jquery ui js -->
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!-- custom -->
    <link rel="stylesheet" type="text/css" href="css/web.css">
    <link rel='stylesheet' type='text/css' href="css/contact.css">
    <style type="text/css">

    </style>
</head>

<body>
    <noscript style="margin-left: 30px;">你現在所開的瀏覽器不支援 javascript，請從瀏覽器設定啟用 javascript</noscript>
    <header>
        <div class="center">
            <div class="centered">
                <div id="shortcut">
                    <div class="avatar">
                        <a href="/" title="Woolito Studio" class="avatar circle" rel="external"><img src="http://68.media.tumblr.com/avatar_b52e662f5c5a_128.png" alt="Woolito Studio" class="default"></a>
                    </div>
                    <div class="logo">
                        <h1><a href="/" rel="external" title="Woolito Studio">Woolito Studio</a></h1>
                    </div>
                    <p class="description">我們努力創作有趣的動畫與圖文並分享笑容</p>
                    <p class="description">希望能為彼此的生活點綴</p>
                    <p class="description">一些無厘頭的樂趣！</p>
                    <div class="social_network">
                        <a href="https://www.facebook.com/Woolito/" target="_blank"><img src="http://static.tumblr.com/sirdwhf/KOpolkwir/facebook.png"></a>
                        <a href="https://page.line.me/woolito" target="_blank"><img src="http://static.tumblr.com/sirdwhf/9lxolkwjx/line.png"></a>
                        <a href="https://www.instagram.com/woolito_studio/" target="_blank"><img src="http://static.tumblr.com/sirdwhf/enxolkwjm/instagram.png"></a>
                        <span class="youtube">
                            <a href="#"><img src="http://static.tumblr.com/sirdwhf/jtnolkwk6/youtube.png"></a>
                            <a href="https://www.youtube.com/user/WoolitoFilm" target="_blank" class="original"><img src="http://static.tumblr.com/sirdwhf/G2Qollqia/original.png"></a>
                            <a href="https://www.youtube.com/user/woooooolito" target="_blank" class="business"><img src="http://static.tumblr.com/sirdwhf/oLCollqig/business.png"></a>
                        </span>
                    </div>
                </div>
                <div id="navigation">
                    <ul>
                        <li>
                            <a href="/contact">
                                <div>
                                    <span class="label-chinese">聯繫我們</span>
                                    <span class="label-english">Contact</span>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="/service">
                                <div>
                                    <span class="label-chinese">商業服務</span>
                                    <span class="label-english">Service</span>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="/works">
                                <div>
                                    <span class="label-chinese">作品集</span>
                                    <span class="label-english">Works</span>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <div>
                                    <span class="label-chinese">沒靈感</span>
                                    <span class="label-english">Ideas</span>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="http://woolito.shoplineapp.com/" target="_blank">
                                <div>
                                    <span class="label-chinese">原創商品</span>
                                    <span class="label-english">Shop</span>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="https://store.line.me/stickershop/author/72619" target="_blank">
                                <div>
                                    <span class="label-chinese">LINE 貼圖</span>
                                    <span class="label-english">LINE Sticker</span>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
    <section>
        <div class="header">
            <h1>Contact Us</h1>
        </div>
        <div class="content">
            <div class="idea">
                <label class="chinese">告訴我們您的動畫 IDEA</label>
                <label class="english">Talk About Your Animation</label>
                <img class="tip" src="http://static.tumblr.com/sirdwhf/c8uoc40kz/error_flower.png">
                <img class="error" src="http://static.tumblr.com/sirdwhf/ETmof82ox/contact_web_error.png">
                <label class="error">這是必填欄位喔！</label>
                <div class="input-field">
                    <textarea id="input-idea" rows="10">任何我們能幫助您的需求都歡迎寫下來</textarea>
                </div>
            </div>
            <div class="budget">
                <label class="chinese">預算</label>
                <label class="english">Budget</label>
                <label class="advice">讓我們提供您「最符合您預算」的建議</label>
                <div class="input-field">
                    <div class="checkbox" style="text-align: center;">
                        <label>
                            <input type="checkbox" onchange="changeBudget(this)"> 無預算限制
                        </label>
                    </div>
                    <div id="slider-range"></div>
                    <div class="numbers-field">
                        <div class="des">$0</div>
                        <div class="des">$100,000</div>
                        <div class="des">$200,000</div>
                        <div class="des">$300,000</div>
                        <div class="des">$400,000</div>
                        <div class="des">$500,000</div>
                    </div>
                    <div id="result">
                        <span>$</span>
                        <span id="min">100,000</span>
                        <span style="margin-right: 5px; margin-left: 5px;">~</span>
                        <span>$</span>
                        <span id="max">200,000</span>
                    </div>
                </div>
            </div>
            <div class="name">
                <label class="chinese">稱呼</label>
                <label class="english">Name</label>
                <img class="tip" src="http://static.tumblr.com/sirdwhf/c8uoc40kz/error_flower.png">
                <img class="error" src="http://static.tumblr.com/sirdwhf/ETmof82ox/contact_web_error.png">
                <label class="error">這是必填欄位喔！</label>
                <div class="input-field">
                    <input type="text" id="input-name" />
                </div>
            </div>
            <div class="company">
                <label class="chinese">公司單位名稱</label>
                <label class="english">Company</label>
                <div class="input-field">
                    <input type="text" id="input-company" />
                </div>
            </div>
            <div class="phone">
                <label class="chinese">聯絡電話</label>
                <label class="english">Telephone Number</label>
                <div class="input-field">
                    <input type="text" id="input-phone" onkeyup="return validatePhone(this, value)" />
                </div>
                <img class="papa" src="http://static.tumblr.com/sirdwhf/IF1oc40fk/contact_papa.png">
            </div>
            <div class="email">
                <label class="chinese">聯絡信箱</label>
                <label class="english">Email Address</label>
                <img class="tip" src="http://static.tumblr.com/sirdwhf/c8uoc40kz/error_flower.png">
                <img class="error" src="http://static.tumblr.com/sirdwhf/ETmof82ox/contact_web_error.png">
                <label class="error">填寫格式錯誤！</label>
                <div class="input-field">
                    <input type="email" id="input-email" />
                </div>
            </div>
            <div class="btn-sender">
                <div id="btn-sender">
                    <label class="chinese">傳送</label>
                    <label class="english">Data transfer</label>
                </div>
            </div>
        </div>
        <div class="footer">
            <p>Woolito Studio 無厘頭動畫股份有限公司</p>
            <p>+886 02 2396 8589</p>
            <p>Contact@woolito.com</p>
        </div>
    </section>
    <div class="mask"></div>
    <div id="loading">
        <span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span>
        <span>傳送資料中...</span>
    </div>
    <!-- <div id="alert-danger" class="fade">
        <div class="alert alert-danger alert-dismissible fade in" role="alert">
            <strong>Oops!</strong> 發生預期外的錯誤，我們會盡快排除錯誤。
            <span class="glyphicon glyphicon-remove" onclick="hideAlert()"></span>
        </div>
    </div> -->
</body>
<!-- Google Code for &#26032;&#32178;&#31449;_&#30041;&#21934;&#38913; Conversion Page -->
<script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 941096043;
    var google_conversion_language = "en";
    var google_conversion_format = "3";
    var google_conversion_color = "ffffff";
    var google_conversion_label = "nx0wCI7ChGwQ6_jfwAM";
    var google_remarketing_only = false;
    /* ]]> */
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
    <div style="display:inline;">
        <img height="1" width="1" style="border-style:none;" alt="" src="//www.googleadservices.com/pagead/conversion/941096043/?label=nx0wCI7ChGwQ6_jfwAM&amp;guid=ON&amp;script=0" />
    </div>
</noscript>
<!-- firebase -->
<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
<!-- bootstrap js -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script src="http://static.tumblr.com/sirdwhf/n4Docf3yn/jquery.rwdimagemaps.min.js"></script>
<!-- numeral : to format number -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/1.4.5/numeral.min.js"></script>
<script type="text/javascript">
var isBudgetDefault = false;

$(function() {
    $.getScript("https://www.gstatic.com/firebasejs/3.6.1/firebase.js", function() {
        var config = {
            apiKey: "AIzaSyBNy15wX554wZwTaHuiDTq4O_BA82yXUdE",
            authDomain: "woolito-tumblr-7b996.firebaseapp.com",
            databaseURL: "https://woolito-tumblr-7b996.firebaseio.com",
            storageBucket: "woolito-tumblr-7b996.appspot.com",
            messagingSenderId: "553913781545"
        };
        firebase.initializeApp(config);
        console.log("init firebase done!");
    });

    $(".idea #input-idea").focus(function() {
        if ($("#input-idea").val() == "任何我們能幫助您的需求都歡迎寫下來") {
            $("#input-idea").val("");
        }
    });

    $("#slider-range").slider({
        range: true,
        min: 0,
        max: 500000,
        step: 50000,
        values: [ 100000, 200000 ],
        slide: function( event, ui ) {
            numeral(1000).format('0,0')
            $("#min").text(numeral(ui.values[0]).format('0,0'));
            $("#max").text(numeral(ui.values[1]).format('0,0'));
        }
    });

    $(".idea .input-field textarea").focusout(function() {
        var idea = $("#input-idea").val();
        if (idea == "任何我們能幫助您的需求都歡迎寫下來" || idea == "") {
            $("#input-idea").val("任何我們能幫助您的需求都歡迎寫下來");
            $("#input-idea").css("color", "#aaa");
        } else {
            $("#input-idea").css("color", "#fff");
        }
    });

    $(".name .input-field").click(function() {
        $("#input-name").focus();
    });

    $(".phone .input-field").click(function() {
        $("#input-phone").focus();
    });

    $(".email .input-field").click(function() {
        $("#input-email").focus();
    });

    $(".type label").on("click", enable_type_radio);

    $("#btn-sender").click(function() {
        verifyInput();
    });

    $('[data-toggle="tooltip"]').tooltip();

    $('.alert-success').on('closed.bs.alert', function() {
        location.reload();
    });

    $('.alert-danger').on('closed.bs.alert', function() {
        // do something let engineer know what happen.
    });
});

function validatePhone(element, value){
    var x = event.keyCode;
    var last = value.charAt(value.length-1);
    if(!("1234567890".indexOf(last) > -1)){
        value = value.substring(0, value.length-1);
    }

    element.value = value.replace(/(\d\d\d\d)(\d\d\d)(\d\d\d)/, "$1-$2-$3");
}

function enable_type_radio(element) {
    $(".type label img").attr("src", "http://static.tumblr.com/sirdwhf/7egof82eq/contact_uncheck_radio.png");
    $(element.currentTarget).find("img").attr("src", "http://static.tumblr.com/sirdwhf/S1Uof82e4/contact_check_radio.png");
}

function verifyInput() {
    $(".input-field").css("border", "3px solid #fff");
    $(".content .error").css("display", "none");
    var error = [];
    var idea = $("#input-idea").val();
    if (idea == "" || idea == "任何我們能幫助您的需求都歡迎寫下來") {
        error.push("idea");
    }

    var name = $("#input-name").val();
    if (!name) {
        error.push("name");
    }

    var email = $("#input-email").val();
    if (!validateEmail(email)) {
        error.push("email");
    }

    var company = $("#input-company").val().trim();
    // console.log(error);
    for (var i = 0; i < error.length; i++) {
        switch (error[i]) {
            case "idea":
                $(".idea .input-field").css("border", "3px solid #E94D4C");
                $(".idea img.error").css("display", "inline");
                $(".idea label.error").css("display", "inline-block");
                break;
            case "name":
                $(".name .input-field").css("border", "3px solid #E94D4C");
                $(".name img.error").css("display", "inline");
                $(".name label.error").css("display", "inline-block");
                break;
            case "email":
                $(".email .input-field").css("border", "3px solid #E94D4C");
                $(".email img.error").css("display", "inline");
                $(".email label.error").css("display", "inline-block");
                break;
            default:
                break;
        }
    }

    if (error.length > 0) {
        return;
    }

    var datetime = new Date();
    var min_budget, max_budget;
    if(isBudgetDefault == true){
        min_budget = "";
        max_budget = "無預算限制";
    }else{
        min_budget = $("#min").text();
        max_budget = $("#max").text();
    }

    var data = {
            time: datetime,
            idea: idea,
            name: name,
            email: email,
            min_budget: min_budget,
            max_budget: max_budget,
            phone: $("#input-phone").val(),
            company: company
        }
    console.log(data);

    sendData(data);
}

function validateEmail(email) {
    var patt = /(\w*)@(\w+)\.(\w+)/g;
    return patt.test(email);
}

function sendData(data) {
    var newApplyKey = firebase.database().ref('apply').push({
        idea: data.idea,
        name: data.name,
        email: data.email,
        min_budget: data.min_budget,
        max_budget: data.max_budget,
        phone: data.phone,
        company: data.company
    }).key;
    // console.log(newApplyKey);

    $.ajax({
        url: "https://script.google.com/macros/s/AKfycbzjCXG4CFKRGDao1ygu8yaVQMDglLiGwmtSUnMASiKbQK4MvuHN/exec?&callback=?",
        dataType: "text",
        method: "POST",
        data: data,
        beforeSend: showLoading(),
        // error: showError(),
        // success: showSuccess()
    }).done(function(response) {
        console.log(response)
        hideLoading();
        successRedirect(response);
    });
}

function showLoading() {
    $(".mask").css("display", "inherit");
    $("#loading").css("display", "inherit");
}

function hideLoading() {
    $(".mask").css("display", "none");
    $("#loading").css("display", "none");
}

function changeBudget(element){
    isBudgetDefault = element.checked;
    if(isBudgetDefault){
        $("#slider-range").slider("disable");
        $("#result").css("color", "#7c545a");
    }else{
        $("#slider-range").slider("enable");
        $("#result").css("color", "#ff373b");
    }
    console.log(isBudgetDefault);
}

function hideAlert() {
    $(".alert").alert("close");
}

function showError() {
    $(".mask").css("display", "inherit");
    $("#alert-danger").css("display", "block");
    $("#alert-danger").addClass("in");
}

function successRedirect(response) {
    var startIndex = response.indexOf(":")+1;
    var row = response.substring(startIndex);
    location.href = "applySuccess?row="+row;
}

jQuery.fn.onPositionChanged = function(trigger, millis) {
    if (millis == null) millis = 100;
    var o = $(this[0]); // our jquery object
    if (o.length < 1) return o;

    var lastPos = null;
    var lastOff = null;
    setInterval(function() {
        if (o == null || o.length < 1) return o; // abort if element is non existend eny more
        if (lastPos == null) lastPos = o.position();
        if (lastOff == null) lastOff = o.offset();
        var newPos = o.position();
        var newOff = o.offset();
        if (lastPos.top != newPos.top || lastPos.left != newPos.left) {
            $(this).trigger('onPositionChanged', { lastPos: lastPos, newPos: newPos });
            if (typeof(trigger) == "function") trigger(lastPos, newPos);
            lastPos = o.position();
        }
        if (lastOff.top != newOff.top || lastOff.left != newOff.left) {
            $(this).trigger('onOffsetChanged', { lastOff: lastOff, newOff: newOff });
            if (typeof(trigger) == "function") trigger(lastOff, newOff);
            lastOff = o.offset();
        }
    }, millis);

    return o;
};

Number.prototype.formatMoney = function(fractionDigits, decimal, separator) {
    fractionDigits = isNaN(fractionDigits = Math.abs(fractionDigits)) ? 2 : fractionDigits;
    decimal = typeof(decimal) === "undefined" ? "." : decimal;
    separator = typeof(separator) === "undefined" ? "," : separator;
    var number = this;
    var neg = number < 0 ? "-" : "";
    var wholePart = parseInt(number = Math.abs(+number || 0).toFixed(fractionDigits)) + "";
    var separtorIndex = (separtorIndex = wholePart.length) > 3 ? separtorIndex % 3 : 0;
    return neg +
        (separtorIndex ? wholePart.substr(0, separtorIndex) + separator : "") +
        wholePart.substr(separtorIndex).replace(/(\d{3})(?=\d)/g, "$1" + separator) +
        (fractionDigits ? decimal + Math.abs(number - wholePart).toFixed(fractionDigits).slice(2) : "");
};

</script>

</html>